<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Resume/title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Arimo:wght@400;700&family=IBM+Plex+Mono:wght@400;600&family=IBM+Plex+Sans:wght@300;400;600&family=Inter:wght@300;400;600;800&family=Red+Hat+Display:wght@400;500;700;900&family=Roboto:wght@300;400;500;700&family=Lato:wght@300;400;700&family=Montserrat:wght@300;400;600;800&family=Open+Sans:wght@300;400;600&family=Source+Sans+3:wght@300;400;600&display=swap" rel="stylesheet">
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* --- CORE STYLES --- */
        :root { 
            --accent: #0ea5e9; 
            --page-margin: 35px; 
            --module-gap: 0px; /* Forced Minimum */
            --item-gap: 0px;   /* Forced Minimum */
        }
        body { background-color: #0f172a; color: #e2e8f0; font-family: 'IBM Plex Sans', sans-serif; overflow-x: hidden; }
        
        /* PAGE DIMENSIONS */
        .page-container {
            background: white;
            margin: 0 auto;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            position: relative;
            color: #1e293b;
            padding: var(--page-margin);
            overflow: visible; 
            transition: width 0.3s, min-height 0.3s;
        }
        
        /* Size Classes */
        .size-a4 { width: 210mm; min-height: 297mm; }
        .size-letter { width: 215.9mm; min-height: 279.4mm; }
        .size-legal { width: 215.9mm; min-height: 355.6mm; }

        /* The Grid */
        .resume-grid { display: grid; grid-template-columns: 7fr 5fr; gap: 2.5rem; }
        .col-full { grid-column: 1 / -1; }
        .col-left { grid-column: 1 / 2; }
        .col-right { grid-column: 2 / 3; }
        
        /* SPACING SYSTEM */
        .section-item { 
            margin-bottom: -25px; /* Fixed visual spacing for readability */
            position: relative; 
            break-inside: avoid;
        }

        /* Internal spacing */
        .dynamic-gap { gap: var(--item-gap); }
        .dynamic-mb { margin-bottom: var(--item-gap); }
        .tag-container { gap: var(--item-gap); }
        
        /* Links */
        a { color: var(--accent); text-decoration: none; border-bottom: 1px dotted currentColor; cursor: pointer; }
        a:hover { border-bottom-style: solid; }

        /* Print Overrides - STRICT GAP REMOVAL */
        @media print {
            body, html { background: white; margin: 0; padding: 0; overflow: visible; height: 100%; }
            #app-ui, .no-print, .menu-bridge, .page-delete-btn { display: none !important; }
            
            .page-container {
                box-shadow: none; 
                margin: 0; 
                padding: var(--page-margin) !important;
                border: none; 
                page-break-after: always;
                min-height: 100%;
                height: auto;
            }
            .page-container:last-child { page-break-after: auto; }
            
            /* Ensure icons align perfectly in print */
            .icon-wrapper { margin-right: 6px !important; display: inline-block; vertical-align: middle; }
        }

        /* Editable Areas */
        .editable { min-width: 10px; display: inline-block; }
        .editable:empty:before { content: attr(placeholder); opacity: 0.3; }
        .editable:focus { outline: none; background: rgba(0,165,233,0.1); border-radius: 2px; }
        
        /* Control Menu Bridge */
        .menu-bridge { position: absolute; bottom: -10px; left: 0; width: 100%; height: 10px; }
        
        /* Sidebar Tooltip */
        .sidebar-tooltip {
            visibility: hidden;
            opacity: 0;
            position: fixed;
            left: 4.5rem; 
            bottom: 1.5rem;
            width: 250px;
            background: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            border: 1px solid #334155;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
            transition: opacity 0.2s;
            z-index: 100;
            font-size: 0.75rem;
            line-height: 1.4;
        }
        .sidebar-tooltip.active { visibility: visible; opacity: 1; pointer-events: auto; }

        /* Color Picker Grid */
        .color-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 4px; }
        .color-btn { width: 100%; height: 18px; border-radius: 4px; transition: transform 0.1s; border: 1px solid rgba(255,255,255,0.1); }
        .color-btn:hover { transform: scale(1.1); z-index: 10; border-color: white; }
        .color-btn.active { border: 2px solid white; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICONS ---
        const Icons = {
            Trash: () => <svg width="14" height="14" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>,
            MoveUp: () => <svg width="14" height="14" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><polyline points="18 15 12 9 6 15"/></svg>,
            MoveDown: () => <svg width="14" height="14" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"/></svg>,
            LayoutFull: () => <svg width="16" height="12" fill="currentColor" viewBox="0 0 16 12"><rect width="16" height="12" rx="1" fillOpacity="0.3"/><rect x="2" y="2" width="12" height="8" rx="0.5"/></svg>,
            LayoutLeft: () => <svg width="16" height="12" fill="currentColor" viewBox="0 0 16 12"><rect width="16" height="12" rx="1" fillOpacity="0.3"/><rect x="2" y="2" width="4" height="8" rx="0.5"/></svg>,
            LayoutRight: () => <svg width="16" height="12" fill="currentColor" viewBox="0 0 16 12"><rect width="16" height="12" rx="1" fillOpacity="0.3"/><rect x="7" y="2" width="7" height="8" rx="0.5"/></svg>,
            
            // Modules
            ModHeader: () => <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="M4 6h16M4 12h8m-8 6h8"/></svg>,
            ModText: () => <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h10"/></svg>,
            ModList: () => <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>,
            ModTags: () => <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>,
            ModContact: () => <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><circle cx="12" cy="12" r="3"/></svg>,
            ModGrid: () => <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>,
            ModRefs: () => <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>,
            // NEW LANGS ICON
            ModLang: () => <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>,
            ModDisclaimer: () => <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>,
            
            InfoOutline: () => <svg width="24" height="24" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>,
            
            // Socials
            Pin: () => <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>,
            Phone: () => <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>,
            Mail: () => <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>,
            Link: () => <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>,
            GitHub: () => <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></svg>,
            Linkedin: () => <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg>,
            Info: () => <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
        };

        const CONTACT_ICONS = [
            { id: 'pin', icon: Icons.Pin },
            { id: 'phone', icon: Icons.Phone },
            { id: 'mail', icon: Icons.Mail },
            { id: 'link', icon: Icons.Link },
            { id: 'git', icon: Icons.GitHub },
            { id: 'in', icon: Icons.Linkedin }
        ];

        const ACCENT_COLORS = [
            '#0ea5e9', '#0284c7', '#2563eb', '#4f46e5', '#7c3aed', '#db2777', 
            '#e11d48', '#d97706', '#059669', '#0d9488', '#0891b2', '#334155'
        ];

        // --- COMPONENTS ---

        const Editable = ({ value, onChange, placeholder, className, multiline }) => {
            const handleBlur = (e) => {
                let html = e.target.innerHTML;
                // ROBUST URL REGEX - Detects carino.systems, software.carino.systems etc.
                // It looks for sequences of word.tld where TLD is 2+ chars.
                const urlRegex = /((https?:\/\/)?(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}(?::\d{2,5})?(?:[\/?#][^\s<]*)?)(?![^<]*>|[^<>]*<\/a>)/gi;
                
                if (html.match(urlRegex)) {
                    html = html.replace(urlRegex, (match) => {
                        let href = match;
                        if (!href.startsWith('http://') && !href.startsWith('https://')) {
                            href = 'http://' + href;
                        }
                        const display = match.replace(/^(https?:\/\/)?(www\.)?/, '');
                        return `<a href="${href}" target="_blank">${display}</a>`;
                    });
                }
                onChange(html);
            };

            return React.createElement(multiline ? 'div' : 'span', {
                className: `editable ${className}`,
                contentEditable: true,
                suppressContentEditableWarning: true,
                placeholder: placeholder,
                onBlur: handleBlur,
                dangerouslySetInnerHTML: { __html: value }
            });
        };

        const SectionControl = ({ onDelete, onMove, currentCol, onColChange }) => (
            <div className="absolute -top-7 right-0 flex items-center opacity-0 group-hover:opacity-100 transition duration-150 z-20 no-print">
                <div className="flex bg-slate-900 text-white rounded shadow-lg overflow-hidden border border-slate-700 text-xs">
                    <div className="flex border-r border-slate-700">
                         <button onClick={() => onMove(-1)} className="p-1.5 hover:bg-slate-700" title="Move Up"><Icons.MoveUp/></button>
                         <button onClick={() => onMove(1)} className="p-1.5 hover:bg-slate-700" title="Move Down"><Icons.MoveDown/></button>
                    </div>
                    <div className="flex border-r border-slate-700">
                        <button onClick={() => onColChange('col-full')} className={`p-1.5 hover:bg-slate-700 ${currentCol === 'col-full' ? 'text-sky-400' : 'opacity-70'}`} title="Full Width"><Icons.LayoutFull/></button>
                        <button onClick={() => onColChange('col-left')} className={`p-1.5 hover:bg-slate-700 ${currentCol === 'col-left' ? 'text-sky-400' : 'opacity-70'}`} title="Left Sidebar"><Icons.LayoutLeft/></button>
                        <button onClick={() => onColChange('col-right')} className={`p-1.5 hover:bg-slate-700 ${currentCol === 'col-right' ? 'text-sky-400' : 'opacity-70'}`} title="Right Main"><Icons.LayoutRight/></button>
                    </div>
                    <button onClick={onDelete} className="p-1.5 hover:bg-red-600 hover:text-white text-red-300" title="Delete Section"><Icons.Trash /></button>
                </div>
                <div className="menu-bridge"></div>
            </div>
        );

        function App() {
            const [pages, setPages] = useState([{ id: 1, sections: [] }]);
            const [config, setConfig] = useState({ 
                font: 'IBM Plex Sans', 
                accent: '#0ea5e9', 
                size: 13.5, 
                margin: 20, 
                paperSize: 'a4',
                darkModeResume: false 
            });
            const [activePage, setActivePage] = useState(0);
            const [showInfo, setShowInfo] = useState(false);
            const saveTimeoutRef = useRef(null);

            useEffect(() => {
                const style = document.createElement('style');
                style.innerHTML = `@media print { @page { size: ${config.paperSize}; margin: 0; } }`;
                document.head.appendChild(style);
                return () => document.head.removeChild(style);
            }, [config.paperSize]);

            useEffect(() => {
                const hash = window.location.hash.substring(1);
                if (hash) {
                    try {
                        const saved = JSON.parse(decodeURIComponent(escape(window.atob(hash))));
                        if(saved.pages) setPages(saved.pages);
                        if(saved.config) setConfig(saved.config);
                    } catch(e) {}
                } else {setPages([
                      {
                        id: 1,
                        sections: [
                          {
                            id: 'h1',
                            type: 'header',
                            col: 'col-full',
                            data: { name: "Ethan Miller", title: "Senior IT Systems Engineer", border: true }
                          },
                      
                          {
                            id: 'c1',
                            type: 'contact',
                            col: 'col-full',
                            items: [
                              { icon: 'pin', text: "Seattle, USA" },
                              { icon: 'phone', text: "+1 206 555 0142" },
                              { icon: 'mail', text: "ethan.miller@example.com" },
                              { icon: 'in', text: "linkedin.com/in/ethanmiller-tech" },
                              { icon: 'link', text: "ethanmiller.dev" }
                            ]
                          },
                      
                          {
                            id: 'exp',
                            type: 'list',
                            title: "PROFESSIONAL EXPERIENCE",
                            col: 'col-left',
                            items: [
                              {
                                title: "Northbridge Cloud Services",
                                subtitle: "Senior Infrastructure Engineer | March 2022 - Present",
                                desc:
                                  "Design and maintain hybrid cloud infrastructure for enterprise clients. Lead automation initiatives using Infrastructure as Code and container platforms. Improved system uptime and reduced deployment times through CI/CD pipelines and proactive monitoring.\nnorthbridgecloud.example.com"
                              },
                              {
                                title: "BluePeak Technologies",
                                subtitle: "Systems Administrator | July 2018 - February 2022",
                                desc:
                                  "Managed Windows and Linux servers across multiple sites. Implemented backup and disaster recovery strategies. Standardized system configurations and reduced licensing costs by adopting open-source solutions.\nbluepeaktech.example.com"
                              },
                              {
                                title: "Rivergate IT Consulting",
                                subtitle: "IT Support Specialist | June 2015 – June 2018",
                                desc:
                                  "Provided Tier 2/3 support for business clients, including network setup, endpoint management, and server maintenance. Assisted in small business infrastructure design and security hardening.\nrivergateit.example.com"
                              }
                            ]
                          },
                      
                          {
                            id: 'tech1',
                            type: 'list',
                            title: "TECHNICAL SKILLS",
                            col: 'col-right',
                            items: [
                              { title: "Operating Systems", subtitle: "", desc: "Linux, Windows Server, macOS." },
                              { title: "Programming", subtitle: "", desc: "Python, Go, Bash, JavaScript." },
                              { title: "Cloud Platforms", subtitle: "", desc: "AWS, Azure, Google Cloud." },
                              { title: "Containers", subtitle: "", desc: "Docker, Kubernetes." },
                              { title: "Automation", subtitle: "", desc: "Terraform, Ansible." },
                              { title: "Networking", subtitle: "", desc: "TCP/IP, VLANs, VPNs, firewalls." },
                              { title: "Monitoring", subtitle: "", desc: "Prometheus, Grafana, Zabbix." },
                              { title: "Databases", subtitle: "", desc: "PostgreSQL, MySQL, MongoDB." },
                              { title: "CI/CD", subtitle: "", desc: "GitHub Actions, GitLab CI." },
                              { title: "Virtualization", subtitle: "", desc: "VMware, Proxmox." },
                              { title: "Security", subtitle: "", desc: "System hardening, IAM, encrypted backups." },
                              { title: "Methodologies", subtitle: "", desc: "ITIL, Agile/Scrum." }
                            ]
                          },
                      
                          {
                            id: 'edu',
                            type: 'list',
                            title: "EDUCATION",
                            col: 'col-left',
                            items: [
                              {
                                title: "University of Washington",
                                subtitle: "2011 - 2015",
                                desc: "BSc in Information Technology"
                              }
                            ]
                          },
                      
                          {
                            id: 'lang',
                            type: 'languages',
                            title: "LANGUAGES",
                            col: 'col-right',
                            items: [
                              { title: "English", subtitle: "Native" },
                              { title: "German", subtitle: "B2" }
                            ]
                          },
                      
                          {
                            id: 'disc',
                            type: 'disclaimer',
                            col: 'col-full',
                            content: "Sample résumé generated with fictional data for layout testing."
                          }
                        ]
                      }
                    ]);

                }
            }, []);

            useEffect(() => {
                if (saveTimeoutRef.current) clearTimeout(saveTimeoutRef.current);
                saveTimeoutRef.current = setTimeout(() => {
                    const payload = { pages, config };
                    const encoded = window.btoa(unescape(encodeURIComponent(JSON.stringify(payload))));
                    window.history.replaceState(null, null, '#' + encoded);
                }, 1000); 
                return () => clearTimeout(saveTimeoutRef.current);
            }, [pages, config]);

            const deletePage = (id) => {
                if (pages.length === 1) return;
                const newPages = pages.filter(p => p.id !== id);
                setPages(newPages);
                if (activePage >= newPages.length) setActivePage(newPages.length - 1);
            };

            const addSection = (type) => {
                const defaults = {
                    header: { data: { name: "Name", title: "Title", border: true } },
                    text: { content: "Content..." },
                    list: { items: [{title: "Title", subtitle: "Date", desc: "Description"}] },
                    languages: { items: [{title: "Language", subtitle: "Level"}] },
                    tags: { items: ["Skill"] },
                    grid: { items: [{title: "Project", desc: "Details"}] },
                    contact: { items: [{icon: 'mail', text: "email@example.com"}] },
                    references: { items: [{name: "Ref Name", role: "Role / Company", contact: "Contact Info"}]},
                    disclaimer: { content: "Disclaimer text here..." }
                };
                const newSec = { id: Date.now(), type, title: (type === 'contact' || type === 'disclaimer' || type === 'header') ? '' : "Título", col: 'col-full', ...defaults[type] };
                const newPages = [...pages];
                newPages[activePage].sections.push(newSec);
                setPages(newPages);
            };

            const updateSection = (pIdx, sIdx, field, val) => {
                const newPages = [...pages];
                newPages[pIdx].sections[sIdx][field] = val;
                setPages(newPages);
            };

            const moveSection = (pIdx, sIdx, dir) => {
                const newPages = [...pages];
                const sections = newPages[pIdx].sections;
                const target = sIdx + dir;
                if (target >= 0 && target < sections.length) {
                    [sections[sIdx], sections[target]] = [sections[target], sections[sIdx]];
                    setPages(newPages);
                }
            };

            const getIcon = (id) => {
                const item = CONTACT_ICONS.find(i => i.id === id);
                return item ? <item.icon /> : null;
            };

            return (
                <div className="flex flex-col min-h-screen">
                    
                    {/* --- TOP BAR --- */}
                    <div className="h-16 bg-slate-900 border-b border-slate-800 flex items-center justify-between px-4 z-50 fixed w-full top-0 shadow-lg no-print">
                        <div className="flex items-center gap-4">
                            <h1 className="font-bold text-white flex items-center gap-2">
                                <span className="w-3 h-3 rounded-full bg-sky-500"></span> Simple Resume
                            </h1>
                            <select value={config.paperSize} onChange={e => setConfig({...config, paperSize: e.target.value})} 
                                className="bg-slate-800 text-xs text-slate-300 p-1.5 rounded border border-slate-700 font-mono uppercase">
                                <option value="a4">A4</option>
                                <option value="letter">Letter</option>
                                <option value="legal">Legal</option>
                            </select>
                        </div>

                        <div className="flex items-center gap-6">
                            <div className="flex items-center gap-4 border-r border-slate-700 pr-4 mr-2">
                                <div className="color-grid w-32">
                                    {ACCENT_COLORS.map(c => (
                                        <button key={c} onClick={() => setConfig({...config, accent: c})} 
                                            className={`color-btn ${config.accent === c ? 'active' : ''}`} style={{background: c}}></button>
                                    ))}
                                </div>

                                <label className="flex flex-col text-[9px] uppercase font-bold text-slate-500 group">
                                    Size
                                    <input type="number" value={config.size} onChange={e=>setConfig({...config, size:e.target.value})} className="w-12 bg-slate-800 text-white rounded px-1 border border-slate-700 mt-1"/>
                                </label>
                                <label className="flex flex-col text-[9px] uppercase font-bold text-slate-500 group">
                                    Margin
                                    <input type="range" min="10" max="60" value={config.margin} onChange={e=>setConfig({...config, margin:e.target.value})} className="w-16 accent-sky-500 h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer mt-1"/>
                                </label>
                            </div>

                            <select value={config.font} onChange={e => setConfig({...config, font: e.target.value})} className="bg-slate-800 text-xs text-white p-2 rounded font-bold border border-slate-700">
                                <option value="IBM Plex Sans">IBM Plex</option>
                                <option value="Roboto">Roboto</option>
                                <option value="Open Sans">Open Sans</option>
                                <option value="Lato">Lato</option>
                                <option value="Montserrat">Montserrat</option>
                                <option value="Source Sans 3">Source Sans</option>
                                <option value="Red Hat Display">Red Hat</option>
                                <option value="Arimo">Arimo</option>
                                <option value="Inter">Inter</option>
                            </select>
                             <button onClick={() => setConfig({...config, darkModeResume: !config.darkModeResume})} className="text-slate-400 hover:text-white px-2">
                                {config.darkModeResume ? '☀' : '☾'}
                            </button>
                            <button onClick={() => window.print()} className="bg-sky-600 hover:bg-sky-500 text-white px-3 py-1.5 rounded text-xs font-bold shadow-lg">Print PDF</button>
                        </div>
                    </div>

                    {/* --- SIDE TOOLBOX --- */}
                    <div className="fixed right-0 top-16 bottom-0 w-16 bg-slate-900 border-l border-slate-800 z-40 flex flex-col items-center py-4 gap-4 no-print overflow-y-auto">
                        <div className="text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-1">Add</div>
                        {[
                            {id: 'header', label: 'Head', icon: Icons.ModHeader},
                            {id: 'text', label: 'Text', icon: Icons.ModText}, 
                            {id: 'list', label: 'List', icon: Icons.ModList}, 
                            {id: 'tags', label: 'Skills', icon: Icons.ModTags}, 
                            {id: 'languages', label: 'Langs', icon: Icons.ModLang},
                            {id: 'contact', label: 'Info', icon: Icons.ModContact}, 
                            {id: 'grid', label: 'Grid', icon: Icons.ModGrid}, 
                            {id: 'references', label: 'Refs', icon: Icons.ModRefs},
                            {id: 'disclaimer', label: 'Disc', icon: Icons.ModDisclaimer}
                        ].map(tool => (
                            <button key={tool.id} onClick={() => addSection(tool.id)} 
                                className="group w-10 h-10 shrink-0 rounded bg-slate-800 hover:bg-sky-600 text-slate-300 hover:text-white flex items-center justify-center transition shadow-sm border border-slate-700 hover:border-sky-400 relative"
                                title={tool.label}>
                                <tool.icon />
                            </button>
                        ))}
                        
                        {/* SIDEBAR INFO FOOTER */}
                        <div className="mt-auto mb-4 group relative cursor-pointer" onClick={() => setShowInfo(!showInfo)}>
                            <div className={`w-8 h-8 rounded-full bg-slate-800 text-slate-400 flex items-center justify-center hover:bg-sky-900 hover:text-white transition ${showInfo ? 'bg-sky-600 text-white ring-2 ring-sky-300' : ''}`}>
                                <Icons.InfoOutline />
                            </div>
                            <div className={`sidebar-tooltip ${showInfo ? 'active' : ''}`}>
                                <div className="font-bold mb-1 text-sky-400">Privacy & License</div>
                                <div className="mb-2 text-slate-300">
                                    Your data is stored <strong>locally in the URL hash</strong>. It is never sent to any server. You own your data and the generated PDF.
                                </div>
                                <div className="flex gap-3 text-xs pt-2 border-t border-slate-700">
                                    <a href="https://github.com" target="_blank" className="text-white hover:text-sky-400">GitHub</a>
                                    <a href="https://linkedin.com" target="_blank" className="text-white hover:text-sky-400">LinkedIn</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* --- WORKSPACE --- */}
                    <div className="flex-1 pt-24 pb-20 pr-16 flex flex-col items-center gap-8 overflow-y-auto bg-slate-900/50 print:p-0 print:m-0 print:overflow-visible print:bg-white" 
                        style={{'--accent': config.accent, fontFamily: config.font, fontSize: `${config.size}px`, '--page-margin': `${config.margin}px`, '--module-gap': '0px', '--item-gap': '0px'}}>
                        
                        {pages.map((page, pIdx) => (
                            <div key={page.id} className="relative group/page" onClick={() => setActivePage(pIdx)}>
                                <div className={`absolute -left-4 top-0 h-full w-1 transition-colors ${activePage === pIdx ? 'bg-sky-500' : 'bg-transparent'}`}></div>
                                
                                <div className={`page-container size-${config.paperSize} transition-colors duration-300 ${config.darkModeResume ? 'bg-slate-900 text-white' : 'bg-white text-slate-900'}`}>
                                    <button onClick={(e) => {e.stopPropagation(); deletePage(page.id)}} className="page-delete-btn absolute top-2 right-2 p-2 bg-red-100 text-red-500 rounded hover:bg-red-500 hover:text-white opacity-0 group-hover/page:opacity-100 transition z-50">
                                        <Icons.Trash />
                                    </button>

                                    <div className="resume-grid">
                                        
                                        {page.sections.map((sec, sIdx) => (
                                            <div key={sec.id} className={`relative group section-item section-${sec.type} ${sec.col}`}>
                                                <SectionControl 
                                                    onDelete={() => {const np=[...pages]; np[pIdx].sections.splice(sIdx,1); setPages(np)}}
                                                    onMove={(dir) => moveSection(pIdx, sIdx, dir)}
                                                    currentCol={sec.col}
                                                    onColChange={(c) => updateSection(pIdx, sIdx, 'col', c)}
                                                />

                                                {/* HEADER */}
                                                {sec.type === 'header' && (
                                                    <div className="dynamic-mb opacity-90 pb-2 relative group/header">
                                                        <h1 className="text-[2.5em] font-black leading-tight tracking-tight" style={{color: config.accent}}>
                                                            <Editable value={sec.data.name} onChange={v => updateSection(pIdx, sIdx, 'data', {...sec.data, name: v})} placeholder="Name"/>
                                                        </h1>
                                                        <div className="flex items-center gap-2">
                                                            <div className="text-[1.2em] opacity-75 font-medium mt-1 flex-1">
                                                                <Editable value={sec.data.title} onChange={v => updateSection(pIdx, sIdx, 'data', {...sec.data, title: v})} placeholder="Job Title"/>
                                                            </div>
                                                            <button onClick={() => updateSection(pIdx, sIdx, 'data', {...sec.data, border: !sec.data.border})} className="no-print opacity-0 group-hover/header:opacity-100 text-[10px] bg-slate-200 px-1 rounded text-slate-500 hover:text-black" title="Toggle Line">
                                                                =
                                                            </button>
                                                        </div>
                                                        {sec.data.border !== false && (
                                                            <hr className="mt-2 border-t-2" style={{borderColor: config.accent}} />
                                                        )}
                                                    </div>
                                                )}

                                                {/* CONTACT ICONS (Redesigned Info Module) */}
                                                {sec.type === 'contact' && (
                                                    <div className="flex flex-wrap text-[0.9em] opacity-80 items-center gap-x-6 gap-y-1">
                                                        {sec.items.map((item, i) => (
                                                            <div key={i} className="flex items-center group/icon relative inline-flex">
                                                                <span className="icon-wrapper opacity-70 hover:opacity-100 cursor-pointer no-print mr-2 flex-shrink-0" style={{color:config.accent}} onClick={() => {
                                                                    const icons = CONTACT_ICONS.map(c=>c.id);
                                                                    const next = icons[(icons.indexOf(item.icon) + 1) % icons.length];
                                                                    const ni=[...sec.items]; ni[i].icon = next; updateSection(pIdx, sIdx, 'items', ni);
                                                                }}>{getIcon(item.icon)}</span>
                                                                <span className="icon-wrapper print:block hidden mr-2 flex-shrink-0" style={{color:config.accent}}>{getIcon(item.icon)}</span>
                                                                <Editable value={item.text} onChange={v => {const ni=[...sec.items]; ni[i].text=v; updateSection(pIdx, sIdx, 'items', ni)}} />
                                                                <button onClick={() => {const ni=[...sec.items]; ni.splice(i,1); updateSection(pIdx, sIdx, 'items', ni)}} className="no-print text-red-400 opacity-0 group-hover/icon:opacity-100 text-[10px] ml-1">×</button>
                                                            </div>
                                                        ))}
                                                        <button onClick={() => updateSection(pIdx, sIdx, 'items', [...sec.items, {icon: 'mail', text: 'Info'}])} className="no-print opacity-30 hover:opacity-100 font-bold">+</button>
                                                    </div>
                                                )}

                                                {/* DISCLAIMER */}
                                                {sec.type === 'disclaimer' && (
                                                    <div className="flex gap-2 items-start text-[0.8em] opacity-70 italic border-t pt-2 mt-2" style={{borderColor: config.darkModeResume ? '#334155' : '#f1f5f9'}}>
                                                        <span className="mt-0.5" style={{color:config.accent}}><Icons.Info /></span>
                                                        <div className="flex-1 leading-snug"><Editable value={sec.content} onChange={v => updateSection(pIdx, sIdx, 'content', v)} multiline/></div>
                                                    </div>
                                                )}

                                                {/* TITLE */}
                                                {sec.title !== undefined && sec.title !== '' && (
                                                    <h3 className="text-[0.9em] font-bold uppercase tracking-widest dynamic-mb flex items-center gap-2" style={{color: config.accent}}>
                                                        <Editable value={sec.title} onChange={v => updateSection(pIdx, sIdx, 'title', v)} />
                                                    </h3>
                                                )}

                                                {/* TEXT */}
                                                {sec.type === 'text' && <div className="opacity-90 leading-relaxed whitespace-pre-wrap text-[0.95em]"><Editable value={sec.content} onChange={v => updateSection(pIdx, sIdx, 'content', v)} multiline/></div>}

                                                {/* LIST */}
                                                {sec.type === 'list' && (
                                                    <div className="dynamic-gap flex flex-col">
                                                        {sec.items.map((item, i) => (
                                                            <div key={i} className="group/item relative">
                                                                <div className="flex justify-between items-baseline mb-0.5">
                                                                    <div className="font-bold text-[1em]"><Editable value={item.title} onChange={v => {const ni=[...sec.items]; ni[i].title=v; updateSection(pIdx, sIdx, 'items', ni)}} placeholder="Role" /></div>
                                                                    <div className="text-[0.85em] opacity-60 font-mono"><Editable value={item.subtitle} onChange={v => {const ni=[...sec.items]; ni[i].subtitle=v; updateSection(pIdx, sIdx, 'items', ni)}} placeholder="Date" /></div>
                                                                </div>
                                                                <div className="text-[0.9em] opacity-80 leading-relaxed"><Editable value={item.desc} onChange={v => {const ni=[...sec.items]; ni[i].desc=v; updateSection(pIdx, sIdx, 'items', ni)}} multiline placeholder="Details..." /></div>
                                                                <button onClick={() => {const ni=[...sec.items]; ni.splice(i,1); updateSection(pIdx, sIdx, 'items', ni)}} className="absolute -left-6 top-0 text-red-300 opacity-0 group-hover/item:opacity-100 no-print">×</button>
                                                            </div>
                                                        ))}
                                                        <button onClick={() => updateSection(pIdx, sIdx, 'items', [...sec.items, {title:'New',subtitle:'Date',desc:'Desc'}])} className="text-[10px] font-bold opacity-30 hover:opacity-100 uppercase mt-1 no-print self-start">+ Item</button>
                                                    </div>
                                                )}

                                                {/* LANGUAGES */}
                                                {sec.type === 'languages' && (
                                                    <div className="dynamic-gap flex flex-col">
                                                        {sec.items.map((item, i) => (
                                                            <div key={i} className="group/item relative flex justify-between items-center border-b border-slate-100 pb-1" style={{borderColor: config.darkModeResume ? '#1e293b' : '#f1f5f9'}}>
                                                                <div className="font-bold text-[1em]"><Editable value={item.title} onChange={v => {const ni=[...sec.items]; ni[i].title=v; updateSection(pIdx, sIdx, 'items', ni)}} placeholder="Language" /></div>
                                                                <div className="text-[0.85em] opacity-70 italic"><Editable value={item.subtitle} onChange={v => {const ni=[...sec.items]; ni[i].subtitle=v; updateSection(pIdx, sIdx, 'items', ni)}} placeholder="Level" /></div>
                                                                <button onClick={() => {const ni=[...sec.items]; ni.splice(i,1); updateSection(pIdx, sIdx, 'items', ni)}} className="absolute -left-6 top-1 text-red-300 opacity-0 group-hover/item:opacity-100 no-print">×</button>
                                                            </div>
                                                        ))}
                                                        <button onClick={() => updateSection(pIdx, sIdx, 'items', [...sec.items, {title:'New',subtitle:'Level'}])} className="text-[10px] font-bold opacity-30 hover:opacity-100 uppercase mt-1 no-print self-start">+ Language</button>
                                                    </div>
                                                )}

                                                {/* TAGS */}
                                                {sec.type === 'tags' && (
                                                    <div className="flex flex-wrap tag-container text-[0.85em]">
                                                        {sec.items.map((tag, i) => (
                                                            <span key={i} className={`px-2 py-1 rounded font-medium group/tag relative ${config.darkModeResume ? 'bg-slate-800' : 'bg-slate-100'}`}>
                                                                <Editable value={tag} onChange={v => {const ni=[...sec.items]; ni[i]=v; updateSection(pIdx, sIdx, 'items', ni)}} />
                                                                <button onClick={() => {const ni=[...sec.items]; ni.splice(i,1); updateSection(pIdx, sIdx, 'items', ni)}} className="absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-3 h-3 flex items-center justify-center text-[8px] opacity-0 group-hover/tag:opacity-100 no-print">×</button>
                                                            </span>
                                                        ))}
                                                        <button onClick={() => updateSection(pIdx, sIdx, 'items', [...sec.items, "New"])} className="px-2 py-1 rounded border border-dashed opacity-50 hover:opacity-100 no-print">+</button>
                                                    </div>
                                                )}

                                                {/* GRID */}
                                                {sec.type === 'grid' && (
                                                    <div className="grid grid-cols-2 gap-3">
                                                        {sec.items.map((item, i) => (
                                                            <div key={i} className={`p-3 rounded border group/item relative ${config.darkModeResume ? 'border-slate-800 bg-slate-800/50' : 'border-slate-100 bg-slate-50'}`}>
                                                                <div className="font-bold text-[0.9em] mb-1" style={{color: config.accent}}>                                                                    <Editable value={item.title} onChange={v => {const ni=[...sec.items]; ni[i].title=v; updateSection(pIdx, sIdx, 'items', ni)}} placeholder="Project" />                                                                </div>                                                                <div className="text-[0.8em] opacity-70 leading-relaxed">                                                                    <Editable value={item.desc} onChange={v => {const ni=[...sec.items]; ni[i].desc=v; updateSection(pIdx, sIdx, 'items', ni)}} placeholder="Desc..." multiline />                                                                </div>                                                                <button onClick={() => {const ni=[...sec.items]; ni.splice(i,1); updateSection(pIdx, sIdx, 'items', ni)}} className="absolute top-1 right-1 text-red-300 opacity-0 group-hover/item:opacity-100 no-print text-xs">×</button>                                                            </div>                                                        ))}                                                        <button onClick={() => updateSection(pIdx, sIdx, 'items', [...sec.items, {title:'New',desc:'Desc'}])} className="flex items-center justify-center border-2 border-dashed rounded opacity-30 hover:opacity-100 min-h-[50px] no-print text-xs font-bold">+</button>                                                    </div>                                                )}                                                                                            </div>                                        ))}                                    </div>                                </div>                            </div>                        ))}                        <button onClick={() => setPages([...pages, {id: Date.now(), sections:[]}])} className="no-print mt-4 px-6 py-3 rounded border-2 border-dashed border-slate-700 text-slate-500 font-bold hover:text-white hover:border-slate-500">Add Page</button>                    </div>                </div>            );        }        const root = ReactDOM.createRoot(document.getElementById('root'));        root.render(<App />);
        </script>
    </body>
</html>
